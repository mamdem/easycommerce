<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Paramètres</h1>
</div>

<!-- Navigation par onglets -->
<div class="card shadow-sm border-0 rounded-3 mb-4">
  <div class="card-body p-0">
    <ul class="nav nav-tabs settings-tabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link" 
                [class.active]="activeTab === 'compte'" 
                (click)="changeTab('compte')">
          <i class="bi bi-person me-2"></i>Profil
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" 
                [class.active]="activeTab === 'boutique'" 
                (click)="changeTab('boutique')">
          <i class="bi bi-shop me-2"></i>Boutique 
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" 
                [class.active]="activeTab === 'notifications'" 
                (click)="changeTab('notifications')">
          <i class="bi bi-bell me-2"></i>Notifications
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" 
                [class.active]="activeTab === 'affichage'" 
                (click)="changeTab('affichage')">
          <i class="bi bi-palette me-2"></i>Affichage
        </button>
      </li>
    </ul>
  </div>
</div>

<!-- Contenu des onglets -->
<div class="tab-content">

  <!-- Onglet Profil -->
  <div class="tab-pane fade" [class.show]="activeTab === 'compte'" [class.active]="activeTab === 'compte'">
    <div class="card shadow-sm border-0 rounded-3">
      <div class="card-body">
        <h4 class="card-title mb-4">Informations du profil</h4>
        
        <div class="row">
          <div class="col-md-4 mb-4 mb-md-0">
            <div class="text-center">
              <div class="avatar-lg mx-auto mb-3">
                <i class="bi bi-person-circle"></i>
              </div>
              <button class="btn btn-outline-primary btn-sm">
                <i class="bi bi-upload me-1"></i>Changer la photo
              </button>
            </div>
          </div>
          
          <div class="col-md-8">
            <form>
              <div class="row mb-3">
                <div class="col-md-6 mb-3 mb-md-0">
                  <label for="firstName" class="form-label">Prénom</label>
                  <input type="text" class="form-control" id="firstName" [(ngModel)]="userSettings.name.split(' ')[0]" name="firstName">
                </div>
                <div class="col-md-6">
                  <label for="lastName" class="form-label">Nom</label>
                  <input type="text" class="form-control" id="lastName" [(ngModel)]="userSettings.name.split(' ')[1]" name="lastName">
                </div>
              </div>
              
              <div class="mb-3">
                <label for="email" class="form-label">Adresse email</label>
                <input type="email" class="form-control" id="email" [(ngModel)]="userSettings.email" name="email">
              </div>
              
              <div class="mb-3">
                <label for="phone" class="form-label">Téléphone</label>
                <input type="tel" class="form-control" id="phone" [(ngModel)]="userSettings.phone" name="phone">
              </div>
              
              <div class="d-flex justify-content-end">
                <button type="button" class="btn btn-primary" (click)="saveProfile()">
                  <i class="bi bi-check-lg me-1"></i>Enregistrer
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card shadow-sm border-0 rounded-3 mt-4">
      <div class="card-body">
        <h5 class="card-title mb-4">Sécurité</h5>
        
        <form>
          <div class="mb-3">
            <label for="currentPassword" class="form-label">Mot de passe actuel</label>
            <input type="password" class="form-control" id="currentPassword">
          </div>
          
          <div class="row mb-3">
            <div class="col-md-6 mb-3 mb-md-0">
              <label for="newPassword" class="form-label">Nouveau mot de passe</label>
              <input type="password" class="form-control" id="newPassword">
            </div>
            <div class="col-md-6">
              <label for="confirmPassword" class="form-label">Confirmer le mot de passe</label>
              <input type="password" class="form-control" id="confirmPassword">
            </div>
          </div>
          
          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-primary" (click)="updatePassword()">
              <i class="bi bi-key me-1"></i>Changer le mot de passe
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Onglet Boutique -->
  <div class="tab-pane fade" [class.show]="activeTab === 'boutique'" [class.active]="activeTab === 'boutique'">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">Paramètres de la boutique</h1>
      <div class="btn-toolbar mb-2 mb-md-0">
        <button type="button" class="btn btn-primary" (click)="saveSettings()">
          <i class="bi bi-save me-1"></i> Enregistrer
        </button>
      </div>
    </div>

    <!-- Formulaire de paramètres -->
    <div class="row">
      <div class="col-md-8">
        <div class="card shadow-sm border-0 rounded-3 mb-4">
          <div class="card-body">
            <h5 class="card-title">Informations générales</h5>
            <form>
              <div class="mb-3">
                <label for="storeName" class="form-label">Nom de la boutique</label>
                <input type="text" class="form-control" id="storeName" [(ngModel)]="storeSettings.name" name="name">
              </div>
              <div class="mb-3">
                <label for="storeDescription" class="form-label">Description</label>
                <textarea class="form-control" id="storeDescription" rows="3" [(ngModel)]="storeSettings.description" name="description"></textarea>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="storeCurrency" class="form-label">Devise</label>
                  <select class="form-select" id="storeCurrency" [(ngModel)]="storeSettings.currency" name="currency">
                    <option value="EUR">Euro (€)</option>
                    <option value="USD">Dollar américain ($)</option>
                    <option value="GBP">Livre sterling (£)</option>
                    <option value="CAD">Dollar canadien ($)</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="storeLanguage" class="form-label">Langue</label>
                  <select class="form-select" id="storeLanguage" [(ngModel)]="storeSettings.language" name="language">
                    <option value="fr">Français</option>
                    <option value="en">Anglais</option>
                    <option value="es">Espagnol</option>
                    <option value="de">Allemand</option>
                  </select>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Adresse -->
        <div class="card shadow-sm border-0 rounded-3 mb-4">
          <div class="card-body">
            <h5 class="card-title">Adresse</h5>
            <form *ngIf="storeSettings && storeSettings.address">
              <div class="mb-3">
                <label for="storeStreet" class="form-label">Rue</label>
                <input type="text" class="form-control" id="storeStreet" [(ngModel)]="storeSettings.address.street" name="street">
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="storeCity" class="form-label">Ville</label>
                  <input type="text" class="form-control" id="storeCity" [(ngModel)]="storeSettings.address.city" name="city">
                </div>
                <div class="col-md-6">
                  <label for="storeZipCode" class="form-label">Code postal</label>
                  <input type="text" class="form-control" id="storeZipCode" [(ngModel)]="storeSettings.address.zipCode" name="zipCode">
                </div>
              </div>
              <div class="mb-3">
                <label for="storeCountry" class="form-label">Pays</label>
                <input type="text" class="form-control" id="storeCountry" [(ngModel)]="storeSettings.address.country" name="country">
              </div>
            </form>
            <div *ngIf="!storeSettings || !storeSettings.address" class="alert alert-warning">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              Les informations d'adresse ne sont pas disponibles. Veuillez créer une adresse.
              <button class="btn btn-sm btn-primary mt-2" (click)="initializeAddress()">
                <i class="bi bi-plus-circle me-1"></i>Ajouter une adresse
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Colonne de droite -->
      <div class="col-md-4">
        <!-- Thème et couleurs -->
        <div class="card shadow-sm border-0 rounded-3 mb-4">
          <div class="card-body"> 
            <h5 class="card-title">Thème et couleurs</h5>
            <form>
              <div class="mb-3">
                <label for="primaryColor" class="form-label">Couleur principale</label>
                <div class="input-group">
                  <span class="input-group-text color-preview" [style.backgroundColor]="storeSettings.primaryColor"></span>
                  <input type="text" class="form-control" id="primaryColor" [(ngModel)]="storeSettings.primaryColor" name="primaryColor" placeholder="#4f46e5">
                  <input type="color" class="form-control form-control-color" [(ngModel)]="storeSettings.primaryColor" name="primaryColorPicker" title="Choisir une couleur">
                </div>
              </div>
              <div class="mb-3">
                <label for="secondaryColor" class="form-label">Couleur secondaire</label>
                <div class="input-group">
                  <span class="input-group-text color-preview" [style.backgroundColor]="storeSettings.secondaryColor"></span>
                  <input type="text" class="form-control" id="secondaryColor" [(ngModel)]="storeSettings.secondaryColor" name="secondaryColor" placeholder="#f97316">
                  <input type="color" class="form-control form-control-color" [(ngModel)]="storeSettings.secondaryColor" name="secondaryColorPicker" title="Choisir une couleur">
                </div>
              </div>
              <div class="mb-3">
                <p class="form-text">Ces couleurs seront utilisées dans toute votre boutique.</p>
              </div>
              <div class="mb-3">
                <label class="form-label">Aperçu</label>
                <div class="color-preview-container p-3 border rounded">
                  <div class="color-sample primary mb-2 p-2" [style.backgroundColor]="storeSettings.primaryColor">
                    Couleur principale
                  </div>
                  <div class="color-sample secondary p-2" [style.backgroundColor]="storeSettings.secondaryColor">
                    Couleur secondaire
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-sm btn-outline-secondary w-100" (click)="applyColorsPreview()">
                Prévisualiser
              </button>
            </form>
          </div>
        </div>

        <!-- Logo -->
        <div class="card shadow-sm border-0 rounded-3 mb-4">
          <div class="card-body">
            <h5 class="card-title">Logo</h5>
            <div class="text-center py-3">
              <div class="logo-placeholder mb-3" *ngIf="!storeSettings.logo">
                <i class="bi bi-shop"></i>
              </div>
              <img *ngIf="storeSettings.logo" [src]="storeSettings.logo" alt="Logo de la boutique" class="img-fluid mb-3 store-logo">
              <div class="d-grid gap-2">
                <button type="button" class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-upload me-1"></i> Télécharger un logo
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Onglet Notifications -->
  <div class="tab-pane fade" [class.show]="activeTab === 'notifications'" [class.active]="activeTab === 'notifications'">
    <div class="card shadow-sm border-0 rounded-3">
      <div class="card-body">
        <h4 class="card-title mb-4">Paramètres de notification</h4>
        
        <form>
          <div class="form-check form-switch mb-4">
            <input class="form-check-input" type="checkbox" id="emailNotifications" [(ngModel)]="notificationSettings.emailNotifications" name="emailNotifications">
            <label class="form-check-label fw-bold" for="emailNotifications">
              Activer les notifications par email
            </label>
          </div>
          
          <h5 class="mb-3">Notifications des commandes</h5>
          
          <div class="mb-3">
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="orderConfirmation" [(ngModel)]="notificationSettings.orderConfirmation" name="orderConfirmation">
              <label class="form-check-label" for="orderConfirmation">
                Confirmation de commande
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="orderShipped" [(ngModel)]="notificationSettings.orderShipped" name="orderShipped">
              <label class="form-check-label" for="orderShipped">
                Commande expédiée
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="orderDelivered" [(ngModel)]="notificationSettings.orderDelivered" name="orderDelivered">
              <label class="form-check-label" for="orderDelivered">
                Commande livrée
              </label>
            </div>
          </div>
          
          <h5 class="mb-3">Autres notifications</h5>
          
          <div class="mb-3">
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="customerReviews" [(ngModel)]="notificationSettings.customerReviews" name="customerReviews">
              <label class="form-check-label" for="customerReviews">
                Avis clients
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="lowStock" [(ngModel)]="notificationSettings.lowStock" name="lowStock">
              <label class="form-check-label" for="lowStock">
                Alerte de stock bas
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="marketingEmails" [(ngModel)]="notificationSettings.marketingEmails" name="marketingEmails">
              <label class="form-check-label" for="marketingEmails">
                Emails marketing et promotionnels
              </label>
            </div>
          </div>
          
          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-secondary me-2" (click)="resetSettings()">
              <i class="bi bi-arrow-counterclockwise me-1"></i>Réinitialiser
            </button>
            <button type="button" class="btn btn-primary" (click)="saveNotificationSettings()">
              <i class="bi bi-check-lg me-1"></i>Enregistrer
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Onglet Affichage -->
  <div class="tab-pane fade" [class.show]="activeTab === 'affichage'" [class.active]="activeTab === 'affichage'">
    <div class="card shadow-sm border-0 rounded-3">
      <div class="card-body">
        <h4 class="card-title mb-4">Paramètres d'affichage</h4>
        
        <form>
          <h5 class="mb-3">Apparence</h5>
          
          <div class="mb-3">
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="darkMode" [(ngModel)]="displaySettings.darkMode" name="darkMode">
              <label class="form-check-label" for="darkMode">
                Mode sombre
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="compactView" [(ngModel)]="displaySettings.compactView" name="compactView">
              <label class="form-check-label" for="compactView">
                Vue compacte
              </label>
            </div>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="showHelpTips" [(ngModel)]="displaySettings.showHelpTips" name="showHelpTips">
              <label class="form-check-label" for="showHelpTips">
                Afficher les astuces d'aide
              </label>
            </div>
          </div>
          
          <h5 class="mb-3">Rafraîchissement automatique</h5>
          
          <div class="mb-3">
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="autoRefresh" [(ngModel)]="displaySettings.autoRefresh" name="autoRefresh">
              <label class="form-check-label" for="autoRefresh">
                Rafraîchir automatiquement les données
              </label>
            </div>
            
            <div class="row" *ngIf="displaySettings.autoRefresh">
              <div class="col-md-6">
                <label for="refreshInterval" class="form-label">Intervalle de rafraîchissement (minutes)</label>
                <select class="form-select" id="refreshInterval" [(ngModel)]="displaySettings.refreshInterval" name="refreshInterval">
                  <option value="1">1 minute</option>
                  <option value="5">5 minutes</option>
                  <option value="10">10 minutes</option>
                  <option value="30">30 minutes</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-secondary me-2" (click)="resetSettings()">
              <i class="bi bi-arrow-counterclockwise me-1"></i>Réinitialiser
            </button>
            <button type="button" class="btn btn-primary" (click)="saveDisplaySettings()">
              <i class="bi bi-check-lg me-1"></i>Enregistrer
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

</div> 